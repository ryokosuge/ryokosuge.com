{{ $options := dict "inlineImports" true }}
{{ if hugo.IsProduction }}
  {{ $options = merge $options (dict "noMap" true) }}
{{ end }}

{{ with resources.Get "css/main.css" }}
  {{ $styles := . | css.PostCSS $options }}
  {{ if hugo.IsProduction }}
    {{ $styles = $styles | minify | fingerprint | resources.PostProcess }}
  {{ end }}
  <link rel="stylesheet" href="{{ $styles.RelPermalink }}" {{ if hugo.IsProduction }}integrity="{{ $styles.Data.Integrity }}"{{ end }}>
{{ end }}

<!-- Preload Noto Sans JP font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;600&display=swap">
